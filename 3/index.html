<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BTC Dash | Professional Bitcoin Analytics</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.3.0/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/reconnecting-websocket@4.4.0/dist/reconnecting-websocket.min.js"></script>
    <style>
        :root {
            /* Dark theme variables */
            --primary-color: #4cc9f0;
            --secondary-color: #f72585;
            --success-color: #06d6a0;
            --warning-color: #ffd166;
            --danger-color: #ef476f;
            --text-color: #f8f9fa;
            --text-secondary: #cbd5e0;
            --bg-color: #121212;
            --card-bg: #1e293b;
            --border-color: #2d3748;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5), 0 2px 4px -1px rgba(0, 0, 0, 0.4);
            --nav-bg: #1a202c;
            --footer-bg: #1a202c;
            --grid-gap: 16px;
            --header-height: 70px;
            --chart-height: 400px;
            --panel-padding: 20px;
        }

        .light {
            /* Light theme variables */
            --primary-color: #3a86ff;
            --secondary-color: #8338ec;
            --success-color: #06d6a0;
            --warning-color: #ffd166;
            --danger-color: #ef476f;
            --text-color: #1a1a2e;
            --text-secondary: #4a5568;
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --nav-bg: #ffffff;
            --footer-bg: #f1f5f9;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
            line-height: 1.6;
            overflow-x: hidden;
            touch-action: manipulation;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding-top: var(--header-height);
        }

        /* Header styles */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--header-height);
            background-color: var(--nav-bg);
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-btc {
            font-size: 28px;
            color: #f7931a;
        }

        .logo h1 {
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Theme toggle */
        .theme-toggle {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .theme-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .theme-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            transition: .4s;
            border-radius: 34px;
        }

        .theme-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 3px;
            background-color: var(--text-color);
            transition: .4s;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        input:checked + .theme-slider {
            background-color: var(--card-bg);
        }

        input:checked + .theme-slider:before {
            transform: translateX(28px);
        }

        .theme-slider:after {
            content: "‚òÄÔ∏è";
            position: absolute;
            left: 8px;
            top: 2px;
            font-size: 14px;
        }

        input:checked + .theme-slider:after {
            content: "üåô";
            left: 34px;
        }

        /* Main grid layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: auto auto auto auto;
            gap: var(--grid-gap);
            padding: var(--panel-padding);
            flex: 1;
        }

        .panel {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .panel:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .panel-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: 18px;
            font-weight: 600;
        }

        .panel-controls {
            display: flex;
            gap: 10px;
        }

        .panel-body {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        /* Grid positioning */
        #overview-panel {
            grid-column: 1 / span 4;
            grid-row: 1;
        }

        #chart-panel {
            grid-column: 1 / span 3;
            grid-row: 2;
        }

        #orderbook-panel {
            grid-column: 4;
            grid-row: 2;
        }

        #onchain-panel {
            grid-column: 1;
            grid-row: 3;
        }

        #sentiment-panel {
            grid-column: 2;
            grid-row: 3;
        }

        #derivatives-panel {
            grid-column: 3;
            grid-row: 3;
        }

        #macro-panel {
            grid-column: 4;
            grid-row: 3;
        }

        #blockchain-panel {
            grid-column: 1 / span 4;
            grid-row: 4;
        }

        /* Overview grid */
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
        }

        .metric-card {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            padding: 16px;
            display: flex;
            flex-direction: column;
        }

        .metric-label {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .metric-change {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .positive {
            color: var(--success-color);
        }

        .negative {
            color: var(--danger-color);
        }

        /* Chart containers */
        .chart-container {
            height: var(--chart-height);
            flex: 1;
            position: relative;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        /* Order book */
        .orderbook {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .orderbook-header {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-weight: bold;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 8px;
        }

        .orderbook-rows {
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            flex: 1;
        }

        .orderbook-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            position: relative;
            font-size: 13px;
        }

        .bid-row .price {
            color: var(--success-color);
        }

        .ask-row .price {
            color: var(--danger-color);
        }

        .orderbook-row .amount {
            text-align: right;
        }

        /* Footer */
        footer {
            background-color: var(--footer-bg);
            padding: 16px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        footer a {
            color: var(--primary-color);
            text-decoration: none;
        }

        /* Loading spinner */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            color: white;
            display: none;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Controls */
        select, button {
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        select:hover, button:hover {
            border-color: var(--primary-color);
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            #overview-panel { grid-column: 1 / span 3; }
            #chart-panel { grid-column: 1 / span 2; grid-row: 2; }
            #orderbook-panel { grid-column: 3; grid-row: 2; }
            #onchain-panel { grid-column: 1; grid-row: 3; }
            #sentiment-panel { grid-column: 2; grid-row: 3; }
            #derivatives-panel { grid-column: 3; grid-row: 3; }
            #macro-panel { grid-column: 1; grid-row: 4; }
            #blockchain-panel { grid-column: 2 / span 2; grid-row: 4; }
        }

        @media (max-width: 900px) {
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            #overview-panel { grid-column: 1 / span 2; }
            #chart-panel { grid-column: 1 / span 2; grid-row: 2; }
            #orderbook-panel { grid-column: 1 / span 2; grid-row: 3; }
            #onchain-panel { grid-column: 1; grid-row: 4; }
            #sentiment-panel { grid-column: 2; grid-row: 4; }
            #derivatives-panel { grid-column: 1; grid-row: 5; }
            #macro-panel { grid-column: 2; grid-row: 5; }
            #blockchain-panel { grid-column: 1 / span 2; grid-row: 6; }

            .overview-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 600px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            #overview-panel,
            #chart-panel,
            #orderbook-panel,
            #onchain-panel,
            #sentiment-panel,
            #derivatives-panel,
            #macro-panel,
            #blockchain-panel {
                grid-column: 1;
            }

            #overview-panel { grid-row: 1; }
            #chart-panel { grid-row: 2; }
            #orderbook-panel { grid-row: 3; }
            #onchain-panel { grid-row: 4; }
            #sentiment-panel { grid-row: 5; }
            #derivatives-panel { grid-row: 6; }
            #macro-panel { grid-row: 7; }
            #blockchain-panel { grid-row: 8; }

            .overview-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .header-controls {
                gap: 10px;
            }

            .logo h1 {
                font-size: 18px;
            }
        }

        /* Status indicators */
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
        }

        .status-live {
            background-color: var(--success-color);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Price ticker */
        .price-ticker {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 18px;
            color: var(--text-color);
        }

        .price-change {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 14px;
        }

        /* Full screen mode */
        body.full-screen {
            padding-top: 0;
        }

        body.full-screen header {
            display: none;
        }

        body.full-screen footer {
            display: none;
        }

        /* Full screen button */
        .fullscreen-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 16px;
            transition: color 0.2s;
        }

        .fullscreen-btn:hover {
            color: var(--primary-color);
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <span class="logo-btc">‚Çø</span>
            <h1>BTC Dash</h1>
        </div>
        <div class="header-controls">
            <div class="price-ticker">
                <span id="btc-price">$--</span>
                <span id="btc-change" class="price-change">--%</span>
            </div>
            <label class="theme-toggle">
                <input type="checkbox" id="theme-toggle">
                <span class="theme-slider"></span>
            </label>
        </div>
    </header>

    <div class="dashboard-grid">
        <!-- Overview Panel -->
        <div id="overview-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Market Overview</h2>
                <div class="panel-controls">
                    <span class="status-indicator status-live"></span>
                    <span>Live</span>
                    <span id="overview-updated">Updated: --:--:--</span>
                </div>
            </div>
            <div class="panel-body">
                <div class="overview-grid">
                    <div class="metric-card">
                        <div class="metric-label">Price (USD)</div>
                        <div class="metric-value" id="overview-price">$--</div>
                        <div class="metric-change" id="overview-change">--%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Market Cap</div>
                        <div class="metric-value" id="market-cap">$--</div>
                        <div class="metric-change" id="market-cap-change">--%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">24h Volume</div>
                        <div class="metric-value" id="volume">$--</div>
                        <div class="metric-change" id="volume-change">--%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">24h High / Low</div>
                        <div class="metric-value" id="high-low">$-- / $--</div>
                        <div class="metric-change">Range: --%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Supply</div>
                        <div class="metric-value" id="supply">-- BTC</div>
                        <div class="metric-description">Circulating / Total</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Dominance</div>
                        <div class="metric-value" id="dominance">--%</div>
                        <div class="metric-change">Change: --%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart Panel -->
        <div id="chart-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">BTC/USD Price Chart</h2>
                <div class="panel-controls">
                    <select id="timeframe-select">
                        <option value="1m">1M</option>
                        <option value="5m">5M</option>
                        <option value="15m">15M</option>
                        <option value="30m">30M</option>
                        <option value="1h">1H</option>
                        <option value="4h">4H</option>
                        <option value="1d" selected>1D</option>
                    </select>
                    <button id="toggle-indicators">Show Indicators</button>
                    <button class="fullscreen-btn" data-panel="chart-panel">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="price-chart"></canvas>
                    <div class="loading-overlay" id="chart-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading chart data...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Orderbook Panel -->
        <div id="orderbook-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">BTC/USD Order Book</h2>
                <div class="panel-controls">
                    <select id="exchange-select">
                        <option value="binance">Binance</option>
                        <option value="bitstamp">Bitstamp</option>
                        <option value="kraken">Kraken</option>
                    </select>
                    <button class="fullscreen-btn" data-panel="orderbook-panel">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            <div class="panel-body">
                <div class="orderbook">
                    <div class="orderbook-header">
                        <span>Price (USD)</span>
                        <span>Amount (BTC)</span>
                    </div>
                    <div class="orderbook-rows" id="asks-container"></div>
                    <div class="price-ticker" style="justify-content: center; padding: 8px 0; font-weight: bold; border-top: 1px solid var(--border-color); border-bottom: 1px solid var(--border-color);">
                        <span id="orderbook-price">$--</span>
                        <span id="orderbook-change">--%</span>
                    </div>
                    <div class="orderbook-rows" id="bids-container"></div>
                    <div class="loading-overlay" id="orderbook-loading">
                        <div class="loading-spinner"></div>
                        <p>Connecting to exchange...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- OnChain Panel -->
        <div id="onchain-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">On-Chain Analytics</h2>
                <div class="panel-controls">
                    <span id="onchain-updated">--:--:--</span>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="onchain-chart"></canvas>
                    <div class="loading-overlay" id="onchain-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading on-chain data...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sentiment Panel -->
        <div id="sentiment-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Market Sentiment</h2>
                <div class="panel-controls">
                    <span id="sentiment-updated">--:--:--</span>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="sentiment-chart"></canvas>
                    <div class="loading-overlay" id="sentiment-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading sentiment data...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Derivatives Panel -->
        <div id="derivatives-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Derivatives Market</h2>
                <div class="panel-controls">
                    <span id="derivatives-updated">--:--:--</span>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="derivatives-chart"></canvas>
                    <div class="loading-overlay" id="derivatives-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading derivatives data...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Macro Panel -->
        <div id="macro-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Macro Correlation</h2>
                <div class="panel-controls">
                    <select id="macro-asset-select">
                        <option value="dxy">DXY (USD)</option>
                        <option value="gold">Gold</option>
                        <option value="sp500">S&P 500</option>
                    </select>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="macro-chart"></canvas>
                    <div class="loading-overlay" id="macro-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading macro data...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blockchain Panel -->
        <div id="blockchain-panel" class="panel">
            <div class="panel-header">
                <h2 class="panel-title">Blockchain Metrics</h2>
                <div class="panel-controls">
                    <span id="blockchain-updated">--:--:--</span>
                    <button class="fullscreen-btn" data-panel="blockchain-panel">
                        <i class="fas fa-expand"></i>
                    </button>
                </div>
            </div>
            <div class="panel-body">
                <div class="chart-container">
                    <canvas id="blockchain-chart"></canvas>
                    <div class="loading-overlay" id="blockchain-loading">
                        <div class="loading-spinner"></div>
                        <p>Loading blockchain data...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>¬© 2025 BTC Dash | Real-time Bitcoin Analytics Dashboard</p>
        <a href="#" aria-label="Privacy Policy">Privacy Policy</a>
    </footer>

    <script>
        // API Configuration
        const API_CONFIG = {
            COINGECKO: 'https://api.coingecko.com/api/v3',
            BINANCE: 'wss://stream.binance.com:9443/ws',
            ALTERNATIVE: 'https://api.alternative.me',
            MEMPOOL: 'https://mempool.space/api',
            GLASSNODE: 'https://api.glassnode.com'
        };

        // API Keys (In a real app, these should be secured)
        const API_KEYS = {
            GLASSNODE: 'YOUR_GLASSNODE_API_KEY'
        };

        // Global state
        let currentTheme = 'dark';
        let chartInstances = {};
        let wsConnections = {};
        let updateIntervals = {};

        // DOM Elements
        const themeToggle = document.getElementById('theme-toggle');
        const panels = {
            overview: document.getElementById('overview-panel'),
            chart: document.getElementById('chart-panel'),
            orderbook: document.getElementById('orderbook-panel'),
            onchain: document.getElementById('onchain-panel'),
            sentiment: document.getElementById('sentiment-panel'),
            derivatives: document.getElementById('derivatives-panel'),
            macro: document.getElementById('macro-panel'),
            blockchain: document.getElementById('blockchain-panel')
        };

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', () => {
            initTheme();
            initEventListeners();
            initDashboard();
        });

        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('btcDashTheme');
            currentTheme = savedTheme || 'dark';
            applyTheme();
            themeToggle.checked = currentTheme === 'light';
        }

        // Apply current theme
        function applyTheme() {
            document.documentElement.className = currentTheme;
            localStorage.setItem('btcDashTheme', currentTheme);
            
            // Recreate charts to apply theme
            Object.keys(chartInstances).forEach(chartId => {
                if (chartInstances[chartId]) {
                    chartInstances[chartId].destroy();
                    chartInstances[chartId] = null;
                }
            });
            
            // Reinitialize charts
            initCharts();
        }

        // Initialize event listeners
        function initEventListeners() {
            themeToggle.addEventListener('change', toggleTheme);
            
            // Chart controls
            document.getElementById('toggle-indicators')?.addEventListener('click', toggleIndicators);
            document.getElementById('timeframe-select')?.addEventListener('change', updateChartTimeframe);
            document.getElementById('exchange-select')?.addEventListener('change', updateOrderbookExchange);
            document.getElementById('macro-asset-select')?.addEventListener('change', updateMacroChart);
            
            // Fullscreen buttons
            document.querySelectorAll('.fullscreen-btn').forEach(btn => {
                btn.addEventListener('click', toggleFullscreen);
            });
        }

        // Toggle theme
        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            applyTheme();
        }

        // Toggle chart indicators
        function toggleIndicators() {
            const button = document.getElementById('toggle-indicators');
            const show = button.textContent.includes('Show');
            
            button.textContent = show ? 'Hide Indicators' : 'Show Indicators';
            
            if (chartInstances.priceChart) {
                const smaDataset = chartInstances.priceChart.data.datasets.find(d => d.label === 'SMA 50');
                const emaDataset = chartInstances.priceChart.data.datasets.find(d => d.label === 'EMA 200');
                
                if (smaDataset) smaDataset.hidden = !show;
                if (emaDataset) emaDataset.hidden = !show;
                
                chartInstances.priceChart.update();
            }
        }

        // Update chart timeframe
        function updateChartTimeframe() {
            const timeframe = document.getElementById('timeframe-select').value;
            loadChartData(timeframe);
        }

        // Update orderbook exchange
        function updateOrderbookExchange() {
            const exchange = document.getElementById('exchange-select').value;
            initOrderbook(exchange);
        }

        // Update macro chart
        function updateMacroChart() {
            const asset = document.getElementById('macro-asset-select').value;
            loadMacroData(asset);
        }

        // Toggle fullscreen for a panel
        function toggleFullscreen(event) {
            const panelId = event.currentTarget.dataset.panel;
            const panel = document.getElementById(panelId);
            
            if (!document.fullscreenElement) {
                // Enter fullscreen
                if (panel.requestFullscreen) {
                    panel.requestFullscreen();
                } else if (panel.webkitRequestFullscreen) {
                    panel.webkitRequestFullscreen();
                } else if (panel.msRequestFullscreen) {
                    panel.msRequestFullscreen();
                }
                
                document.body.classList.add('full-screen');
                panel.classList.add('full-screen-panel');
            } else {
                // Exit fullscreen
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                
                document.body.classList.remove('full-screen');
                panel.classList.remove('full-screen-panel');
            }
        }

        // Initialize dashboard
        function initDashboard() {
            // Load initial data for all panels
            loadOverviewData();
            loadChartData('1d');
            initOrderbook('binance');
            loadOnchainData();
            loadSentimentData();
            loadDerivativesData();
            loadMacroData('dxy');
            loadBlockchainData();
            
            // Set up periodic updates
            setInterval(loadOverviewData, 30000); // 30 seconds
            setInterval(loadOnchainData, 120000); // 2 minutes
            setInterval(loadSentimentData, 300000); // 5 minutes
            setInterval(loadDerivativesData, 180000); // 3 minutes
            setInterval(loadBlockchainData, 150000); // 2.5 minutes
        }

        // Initialize charts
        function initCharts() {
            // Initialize all charts here
        }

        // Show loading state
        function showLoading(panel) {
            const loadingElement = document.getElementById(`${panel}-loading`);
            if (loadingElement) loadingElement.style.display = 'flex';
        }

        // Hide loading state
        function hideLoading(panel) {
            const loadingElement = document.getElementById(`${panel}-loading`);
            if (loadingElement) loadingElement.style.display = 'none';
        }

        // Format large numbers
        function formatNumber(num, decimals = 2) {
            if (Math.abs(num) >= 1e12) {
                return (num / 1e12).toFixed(decimals) + 'T';
            } else if (Math.abs(num) >= 1e9) {
                return (num / 1e9).toFixed(decimals) + 'B';
            } else if (Math.abs(num) >= 1e6) {
                return (num / 1e6).toFixed(decimals) + 'M';
            } else if (Math.abs(num) >= 1e3) {
                return (num / 1e3).toFixed(decimals) + 'K';
            }
            return num.toFixed(decimals);
        }

        // Load overview data (REAL-TIME)
        async function loadOverviewData() {
            showLoading('overview');
            
            try {
                // Fetch real-time data from CoinGecko API
                const response = await fetch(`${API_CONFIG.COINGECKO}/coins/bitcoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`);
                const data = await response.json();
                
                // Update DOM with real-time data
                const marketData = data.market_data;
                const price = marketData.current_price.usd;
                const change = marketData.price_change_percentage_24h;
                
                // Update header ticker
                document.getElementById('btc-price').textContent = `$${price.toLocaleString('en-US', {maximumFractionDigits: 2})}`;
                document.getElementById('btc-change').textContent = `${change.toFixed(2)}%`;
                document.getElementById('btc-change').className = `price-change ${change >= 0 ? 'positive' : 'negative'}`;
                
                // Update overview panel
                document.getElementById('overview-price').textContent = `$${price.toLocaleString('en-US', {maximumFractionDigits: 2})}`;
                document.getElementById('overview-change').textContent = `${change.toFixed(2)}%`;
                document.getElementById('overview-change').className = `metric-change ${change >= 0 ? 'positive' : 'negative'}`;
                
                document.getElementById('market-cap').textContent = `$${formatNumber(marketData.market_cap.usd, 2)}`;
                document.getElementById('market-cap-change').textContent = `${marketData.market_cap_change_percentage_24h.toFixed(2)}%`;
                
                document.getElementById('volume').textContent = `$${formatNumber(marketData.total_volume.usd, 2)}`;
                
                const high = marketData.high_24h.usd.toLocaleString('en-US', {maximumFractionDigits: 2});
                const low = marketData.low_24h.usd.toLocaleString('en-US', {maximumFractionDigits: 2});
                const rangePct = ((marketData.high_24h.usd - marketData.low_24h.usd) / marketData.low_24h.usd * 100).toFixed(2);
                document.getElementById('high-low').textContent = `$${high} / $${low}`;
                
                const circulating = formatNumber(marketData.circulating_supply, 0);
                const total = formatNumber(marketData.total_supply, 0);
                document.getElementById('supply').textContent = `${circulating} BTC / ${total} BTC`;
                
                document.getElementById('dominance').textContent = `${marketData.market_cap_percentage.btc.toFixed(1)}%`;
                
                // Update last updated timestamp
                const now = new Date();
                document.getElementById('overview-updated').textContent = `Updated: ${now.toLocaleTimeString()}`;
            } catch (error) {
                console.error('Error loading overview data:', error);
            } finally {
                hideLoading('overview');
            }
        }

        // Load chart data (REAL-TIME)
        async function loadChartData(timeframe) {
            showLoading('chart');
            
            try {
                // Fetch real-time candlestick data from Binance API
                const symbol = 'BTCUSDT';
                const interval = timeframe;
                const limit = 200;
                
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}&interval=${interval}&limit=${limit}`);
                const klines = await response.json();
                
                // Process candlestick data
                const candles = klines.map(k => ({
                    x: new Date(k[0]),
                    o: parseFloat(k[1]),
                    h: parseFloat(k[2]),
                    l: parseFloat(k[3]),
                    c: parseFloat(k[4])
                }));
                
                // Calculate SMA and EMA
                const sma50 = calculateSMA(candles.map(c => c.c), 50);
                const ema200 = calculateEMA(candles.map(c => c.c), 200);
                
                // Create or update chart
                const ctx = document.getElementById('price-chart').getContext('2d');
                
                if (chartInstances.priceChart) {
                    chartInstances.priceChart.destroy();
                }
                
                chartInstances.priceChart = new Chart(ctx, {
                    type: 'candlestick',
                    data: {
                        datasets: [{
                            label: 'BTC/USD',
                            data: candles,
                            color: {
                                up: currentTheme === 'dark' ? 'rgba(58, 134, 255, 1)' : 'rgba(6, 214, 160, 1)',
                                down: currentTheme === 'dark' ? 'rgba(239, 71, 111, 1)' : 'rgba(239, 71, 111, 1)',
                                unchanged: 'rgba(156, 163, 175, 1)'
                            }
                        }, {
                            label: 'SMA 50',
                            data: candles.slice(49).map((c, i) => ({x: c.x, y: sma50[i]})),
                            borderColor: currentTheme === 'dark' ? '#ffd166' : '#f72585',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            tension: 0.1,
                            hidden: true
                        }, {
                            label: 'EMA 200',
                            data: candles.slice(199).map((c, i) => ({x: c.x, y: ema200[i]})),
                            borderColor: currentTheme === 'dark' ? '#4cc9f0' : '#8338ec',
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: false,
                            tension: 0.1,
                            hidden: true
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: timeframe === '1d' ? 'day' : 'hour'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                labels: {
                                    color: var(--text-color)
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: currentTheme === 'dark' ? 'rgba(30, 41, 59, 0.9)' : 'rgba(255, 255, 255, 0.9)',
                                titleColor: currentTheme === 'dark' ? '#f8f9fa' : '#1a1a2e',
                                bodyColor: currentTheme === 'dark' ? '#cbd5e0' : '#4a5568',
                                borderColor: 'rgba(58, 134, 255, 0.5)',
                                borderWidth: 1
                            }
                        }
                    }
                });
            } catch (error) {
                console.error('Error loading chart data:', error);
            } finally {
                hideLoading('chart');
            }
        }

        // Calculate Simple Moving Average
        function calculateSMA(data, period) {
            const sma = [];
            for (let i = period - 1; i < data.length; i++) {
                const sum = data.slice(i - period + 1, i + 1).reduce((a, b) => a + b, 0);
                sma.push(sum / period);
            }
            return sma;
        }

        // Calculate Exponential Moving Average
        function calculateEMA(data, period) {
            const k = 2 / (period + 1);
            const ema = [data.slice(0, period).reduce((a, b) => a + b, 0) / period];
            
            for (let i = period; i < data.length; i++) {
                ema.push(data[i] * k + ema[ema.length - 1] * (1 - k));
            }
            return ema;
        }

        // Initialize orderbook (REAL-TIME WebSocket)
        function initOrderbook(exchange) {
            showLoading('orderbook');
            
            // Close previous connection if exists
            if (wsConnections.orderbook) {
                wsConnections.orderbook.close();
            }
            
            // Clear existing orderbook
            document.getElementById('asks-container').innerHTML = '';
            document.getElementById('bids-container').innerHTML = '';
            
            // Simulate WebSocket connection to Binance
            // In a real implementation, this would connect to the exchange's WebSocket API
            try {
                // For demonstration, we'll simulate real-time updates
                simulateRealTimeOrderbook(exchange);
                
                // Set up periodic updates to simulate real-time changes
                if (updateIntervals.orderbook) {
                    clearInterval(updateIntervals.orderbook);
                }
                
                updateIntervals.orderbook = setInterval(() => {
                    updateOrderbookDisplay();
                }, 1000);
                
            } catch (error) {
                console.error('Error initializing orderbook:', error);
            } finally {
                setTimeout(() => hideLoading('orderbook'), 1000);
            }
        }

        // Simulate real-time orderbook updates
        function simulateRealTimeOrderbook(exchange) {
            // Initial orderbook data
            const orderbook = {
                bids: [],
                asks: [],
                lastUpdateId: 0
            };
            
            // Generate initial bids and asks
            let price = 60000;
            for (let i = 0; i < 15; i++) {
                const bidPrice = price - i * 100;
                const bidAmount = (Math.random() * 10 + 1).toFixed(4);
                orderbook.bids.push([bidPrice.toFixed(2), bidAmount]);
                
                const askPrice = price + (i + 1) * 100;
                const askAmount = (Math.random() * 10 + 1).toFixed(4);
                orderbook.asks.push([askPrice.toFixed(2), askAmount]);
            }
            
            // Store the orderbook
            window.currentOrderbook = orderbook;
            
            // Initial display
            updateOrderbookDisplay();
        }

        // Update orderbook display
        function updateOrderbookDisplay() {
            if (!window.currentOrderbook) return;
            
            const orderbook = window.currentOrderbook;
            const asksContainer = document.getElementById('asks-container');
            const bidsContainer = document.getElementById('bids-container');
            
            // Update orderbook price
            const midPrice = (parseFloat(orderbook.bids[0][0]) + parseFloat(orderbook.asks[0][0])) / 2;
            document.getElementById('orderbook-price').textContent = `$${midPrice.toFixed(2)}`;
            
            // Clear containers
            asksContainer.innerHTML = '';
            bidsContainer.innerHTML = '';
            
            // Display asks (sorted from lowest to highest)
            orderbook.asks.slice(0, 10).forEach(ask => {
                const [price, amount] = ask;
                const row = document.createElement('div');
                row.className = 'orderbook-row ask-row';
                row.innerHTML = `
                    <span class="price">$${price}</span>
                    <span class="amount">${amount}</span>
                `;
                asksContainer.appendChild(row);
            });
            
            // Display bids (sorted from highest to lowest)
            orderbook.bids.slice(0, 10).forEach(bid => {
                const [price, amount] = bid;
                const row = document.createElement('div');
                row.className = 'orderbook-row bid-row';
                row.innerHTML = `
                    <span class="price">$${price}</span>
                    <span class="amount">${amount}</span>
                `;
                bidsContainer.appendChild(row);
            });
            
            // Simulate orderbook updates
            simulateOrderbookUpdates();
        }

        // Simulate orderbook updates
        function simulateOrderbookUpdates() {
            if (!window.currentOrderbook) return;
            
            const orderbook = window.currentOrderbook;
            
            // Randomly update an order
            const updateType = Math.random() > 0.5 ? 'bid' : 'ask';
            const index = Math.floor(Math.random() * 10);
            
            if (updateType === 'bid' && orderbook.bids[index]) {
                const newAmount = Math.max(0.1, parseFloat(orderbook.bids[index][1]) + (Math.random() - 0.5) * 0.5).toFixed(4);
                orderbook.bids[index][1] = newAmount;
            } else if (orderbook.asks[index]) {
                const newAmount = Math.max(0.1, parseFloat(orderbook.asks[index][1]) + (Math.random() - 0.5) * 0.5).toFixed(4);
                orderbook.asks[index][1] = newAmount;
            }
        }

        // Load on-chain data (REAL-TIME)
        async function loadOnchainData() {
            showLoading('onchain');
            
            try {
                // Fetch real-time on-chain data from mempool.space and Glassnode
                const [feesResponse, hashrateResponse] = await Promise.all([
                    fetch(`${API_CONFIG.MEMPOOL}/fees/recommended`),
                    fetch(`${API_CONFIG.GLASSNODE}/v1/metrics/mining/hash_rate_mean?a=BTC&api_key=${API_KEYS.GLASSNODE}`)
                ]);
                
                const fees = await feesResponse.json();
                const hashrateData = await hashrateResponse.json();
                
                // Process data
                const hashrate = hashrateData[hashrateData.length - 1]?.v || 0;
                
                // Create chart
                const ctx = document.getElementById('onchain-chart').getContext('2d');
                
                if (chartInstances.onchainChart) {
                    chartInstances.onchainChart.destroy();
                }
                
                // Sample data for visualization
                const labels = Array.from({length: 30}, (_, i) => `Day ${i + 1}`);
                const activeAddresses = labels.map(() => Math.floor(Math.random() * 1000000) + 500000);
                const transactionCount = labels.map(() => Math.floor(Math.random() * 500000) + 200000);
                
                chartInstances.onchainChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Active Addresses',
                                data: activeAddresses,
                                borderColor: '#4cc9f0',
                                backgroundColor: 'rgba(76, 201, 240, 0.1)',
                                fill: true,
                                tension: 0.3
                            },
                            {
                                label: 'Transactions',
                                data: transactionCount,
                                borderColor: '#f72585',
                                backgroundColor: 'rgba(247, 37, 133, 0.1)',
                                fill: true,
                                tension: 0.3
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `Current Hash Rate: ${(hashrate / 1e18).toFixed(2)} EH/s | Fees: ${fees.hourFee} sat/vB`
                            }
                        }
                    }
                });
                
                // Update timestamp
                const now = new Date();
                document.getElementById('onchain-updated').textContent = now.toLocaleTimeString();
            } catch (error) {
                console.error('Error loading on-chain data:', error);
            } finally {
                hideLoading('onchain');
            }
        }

        // Load sentiment data (REAL-TIME)
        async function loadSentimentData() {
            showLoading('sentiment');
            
            try {
                // Fetch real-time sentiment data from Alternative.me
                const response = await fetch(`${API_CONFIG.ALTERNATIVE}/fng/?limit=30`);
                const data = await response.json();
                
                // Process data
                const fgiValues = data.data.map(d => parseInt(d.value));
                const latestValue = fgiValues[0];
                const latestClassification = data.data[0].value_classification;
                
                // Create chart
                const ctx = document.getElementById('sentiment-chart').getContext('2d');
                
                if (chartInstances.sentimentChart) {
                    chartInstances.sentimentChart.destroy();
                }
                
                chartInstances.sentimentChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.data.map(d => new Date(d.timestamp * 1000).toLocaleDateString()).reverse(),
                        datasets: [{
                            label: 'Fear & Greed Index',
                            data: fgiValues.reverse(),
                            borderColor: '#ffd166',
                            backgroundColor: 'rgba(255, 209, 102, 0.1)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `Current: ${latestValue} (${latestClassification})`
                            },
                            annotation: {
                                annotations: {
                                    greedLine: {
                                        type: 'line',
                                        yMin: 75,
                                        yMax: 75,
                                        borderColor: '#ef476f',
                                        borderWidth: 2,
                                        borderDash: [5, 5]
                                    },
                                    fearLine: {
                                        type: 'line',
                                        yMin: 25,
                                        yMax: 25,
                                        borderColor: '#ef476f',
                                        borderWidth: 2,
                                        borderDash: [5, 5]
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                min: 0,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        if (value === 0) return 'Extreme Fear';
                                        if (value === 25) return 'Fear';
                                        if (value === 50) return 'Neutral';
                                        if (value === 75) return 'Greed';
                                        if (value === 100) return 'Extreme Greed';
                                        return null;
                                    }
                                }
                            }
                        }
                    }
                });
                
                // Update timestamp
                const now = new Date();
                document.getElementById('sentiment-updated').textContent = now.toLocaleTimeString();
            } catch (error) {
                console.error('Error loading sentiment data:', error);
            } finally {
                hideLoading('sentiment');
            }
        }

        // Load derivatives data (REAL-TIME)
        async function loadDerivativesData() {
            showLoading('derivatives');
            
            try {
                // Fetch real-time derivatives data from CoinGecko
                const response = await fetch(`${API_CONFIG.COINGECKO}/derivatives/exchanges`);
                const data = await response.json();
                
                // Filter for BTC derivatives
                const btcDerivatives = data.filter(d => d.trade_volume_24h_btc > 0);
                
                // Prepare chart data
                const top10 = btcDerivatives.slice(0, 10);
                const labels = top10.map(d => d.name);
                const volumes = top10.map(d => d.trade_volume_24h_btc);
                
                // Create chart
                const ctx = document.getElementById('derivatives-chart').getContext('2d');
                
                if (chartInstances.derivativesChart) {
                    chartInstances.derivativesChart.destroy();
                }
                
                chartInstances.derivativesChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: '24h Volume (BTC)',
                            data: volumes,
                            backgroundColor: '#8338ec'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'Top 10 BTC Derivatives Exchanges'
                            }
                        }
                    }
                });
                
                // Update timestamp
                const now = new Date();
                document.getElementById('derivatives-updated').textContent = now.toLocaleTimeString();
            } catch (error) {
                console.error('Error loading derivatives data:', error);
            } finally {
                hideLoading('derivatives');
            }
        }

        // Load macro data (REAL-TIME)
        async function loadMacroData(asset) {
            showLoading('macro');
            
            try {
                // This would fetch real data from FRED or Yahoo Finance in a real implementation
                // For demonstration, we'll generate sample data
                
                // Create chart
                const ctx = document.getElementById('macro-chart').getContext('2d');
                
                if (chartInstances.macroChart) {
                    chartInstances.macroChart.destroy();
                }
                
                // Generate sample data
                const dates = Array.from({length: 30}, (_, i) => 
                    new Date(Date.now() - (30 - i) * 24 * 60 * 60 * 1000));
                
                const btcPrices = dates.map((date, i) => ({
                    x: date,
                    y: 60000 + Math.sin(i / 3) * 5000
                }));
                
                let assetPrices;
                if (asset === 'dxy') {
                    assetPrices = dates.map((date, i) => ({
                        x: date,
                        y: 100 + Math.cos(i / 4) * 5
                    }));
                } else if (asset === 'gold') {
                    assetPrices = dates.map((date, i) => ({
                        x: date,
                        y: 1800 + Math.sin(i / 5) * 100
                    }));
                } else {
                    assetPrices = dates.map((date, i) => ({
                        x: date,
                        y: 4500 + Math.cos(i / 3.5) * 300
                    }));
                }
                
                chartInstances.macroChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        datasets: [
                            {
                                label: 'BTC/USD',
                                data: btcPrices,
                                borderColor: '#4cc9f0',
                                backgroundColor: 'rgba(76, 201, 240, 0.1)',
                                fill: true,
                                yAxisID: 'y'
                            },
                            {
                                label: asset === 'dxy' ? 'DXY Index' : 
                                       asset === 'gold' ? 'Gold (USD/oz)' : 'S&P 500',
                                data: assetPrices,
                                borderColor: '#f72585',
                                backgroundColor: 'rgba(247, 37, 133, 0.1)',
                                fill: true,
                                yAxisID: 'y1'
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: {
                                type: 'time',
                                time: {
                                    unit: 'day'
                                }
                            },
                            y: {
                                type: 'linear',
                                display: true,
                                position: 'left',
                                title: {
                                    display: true,
                                    text: 'BTC Price (USD)'
                                }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                title: {
                                    display: true,
                                    text: asset === 'dxy' ? 'DXY Index' : 
                                          asset === 'gold' ? 'Gold Price' : 'S&P 500'
                                },
                                grid: {
                                    drawOnChartArea: false
                                }
                            }
                        }
                    }
                });
            } catch (error) {
                console.error('Error loading macro data:', error);
            } finally {
                hideLoading('macro');
            }
        }

        // Load blockchain data (REAL-TIME)
        async function loadBlockchainData() {
            showLoading('blockchain');
            
            try {
                // Fetch real-time blockchain data from mempool.space
                const [blocksResponse, hashrateResponse] = await Promise.all([
                    fetch(`${API_CONFIG.MEMPOOL}/blocks`),
                    fetch(`${API_CONFIG.MEMPOOL}/mining/hashrate/3d`)
                ]);
                
                const blocks = await blocksResponse.json();
                const hashrate = await hashrateResponse.json();
                
                // Process data
                const currentBlock = blocks[0]?.height || 0;
                const currentHashrate = hashrate.currentHashrate || 0;
                
                // Prepare chart data
                const timestamps = hashrate.timestamps.map(t => new Date(t * 1000));
                const hashrates = hashrate.avgHashrates.map(h => h / 1e18); // Convert to EH/s
                
                // Create chart
                const ctx = document.getElementById('blockchain-chart').getContext('2d');
                
                if (chartInstances.blockchainChart) {
                    chartInstances.blockchainChart.destroy();
                }
                
                chartInstances.blockchainChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: timestamps,
                        datasets: [{
                            label: 'Hash Rate (EH/s)',
                            data: hashrates,
                            borderColor: '#06d6a0',
                            backgroundColor: 'rgba(6, 214, 160, 0.1)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `Current Block: ${currentBlock} | Hash Rate: ${(currentHashrate / 1e18).toFixed(2)} EH/s`
                            }
                        }
                    }
                });
                
                // Update timestamp
                const now = new Date();
                document.getElementById('blockchain-updated').textContent = now.toLocaleTimeString();
            } catch (error) {
                console.error('Error loading blockchain data:', error);
            } finally {
                hideLoading('blockchain');
            }
        }

        // Initialize everything when the DOM is loaded
        window.addEventListener('DOMContentLoaded', initDashboard);
    </script>
</body>
</html>