// script.js 
const API_KEYS = { glassnode: 'YOUR_GLASSNODE_API_KEY', coinglass: 'YOUR_COINGLASS_API_KEY' }; const coinSelect = document.getElementById('coin-select'); async function init() { coinSelect.addEventListener('change', () => updateDashboard(coinSelect.value)); document.getElementById('expand-chart').addEventListener('click', () => { document.getElementById('tv-chart').requestFullscreen?.(); }); updateDashboard(coinSelect.value); setInterval(() => updateDashboard(coinSelect.value), 30000); } async function updateDashboard(coin) { fetchPriceData(coin); fetchFearGreed(); loadTradingView(coin); fetchOnChain(coin); fetchFutures(coin); fetchWhaleAlerts(coin); fetchAltseason(); } async function fetchPriceData(coin) { const res = await fetch(https://api.coingecko.com/api/v3/coins/${coin.toLowerCase()}); const d = await res.json(); document.getElementById('current-price').textContent = $${d.market_data.current_price.usd.toLocaleString()}; document.getElementById('market-cap').textContent = $${d.market_data.market_cap.usd.toLocaleString()}; document.getElementById('change-24h').textContent = ${d.market_data.price_change_percentage_24h.toFixed(2)}%; document.getElementById('volume-24h').textContent = $${d.market_data.total_volume.usd.toLocaleString()}; document.getElementById('dominance').textContent = ${(d.market_data.market_cap.usd/d.market_data.total_market_cap.usd*100).toFixed(2)}%; document.getElementById('coin-logo').src = d.image.thumb; document.getElementById('coin-name').textContent = d.name; } async function fetchFearGreed() { const res = await fetch('https://api.alternative.me/fng/'); const d = await res.json(); const v = +d.data[0].value; const offset = 534 - (534v/100); document.querySelector('.gauge-value').style.strokeDashoffset = offset; document.getElementById('fg-value').textContent = v; document.getElementById('fg-label').textContent = d.data[0].value_classification; document.getElementById('fg-desc').textContent = d.data[0].value_classification; } function loadTradingView(coin) { const container = document.getElementById('tv-chart'); container.innerHTML = ''; const script = document.createElement('script'); script.src = 'https://s3.tradingview.com/tv.js'; script.onload = () => new TradingView.widget({ width: '100%', height: '400', symbol: BINANCE:${coin}USDT, interval: 'D', theme: 'dark', container_id: 'tv-chart' }); document.body.appendChild(script); } async function fetchOnChain(coin) { const m = await fetch(https://api.glassnode.com/v1/metrics/market/mvrv_z_score?api_key=${API_KEYS.glassnode}&a=${coin}); const ma = await m.json(); document.getElementById('mvrv').textContent = ma.pop()[1].toFixed(2); } async function fetchFutures(coin) { const f = await fetch(https://api.coinglass.com/api/pro/v1/futures/fundingrate?api_key=${API_KEYS.coinglass}&symbol=${coin}); const fa = await f.json(); document.getElementById('funding-rate').textContent = fa.data[0].avgFundingRate; } async function fetchWhaleAlerts() { document.getElementById('whale-alerts').innerHTML = '<div class="activity-item"><div class="chart-loading"><i class="fas fa-spinner fa-spin"></i> No data</div></div>'; } async function fetchAltseason() { const g = await fetch('https://api.coingecko.com/api/v3/global'); const gd = await g.json(); const dom = gd.data.market_cap_percentage.btc; const ethbtc = gd.data.market_cap_percentage.eth/dom; positionRadar('radar-btc', dom); positionRadar('radar-eth', ethbtc100); } function positionRadar(id, value) { const el = document.getElementById(id); const angle = id==='radar-btc'?0:60; const radius = 80*(value/100); const x = 100+radiusMath.cos(angleMath.PI/180); const y = 100+radiusMath.sin(angleMath.PI/180); el.style.left=${x}%; el.style.top=${y}%; } document.addEventListener('DOMContentLoaded', init);

